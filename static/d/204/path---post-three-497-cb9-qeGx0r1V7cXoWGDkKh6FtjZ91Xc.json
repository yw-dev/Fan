{"pageContext":{"pathSlug":"/post-three","spath":"blog","prev":{"id":"2c4d5f7b-294d-5bdb-b31d-ec40e91929b8","excerpt":"Ghost is an open source, professional publishing platform built on a modern Node.js technology stack — designed for teams who need power, flexibility and performance. Hitting the right balance of…","html":"<p>Ghost is an open source, professional publishing platform built on a modern Node.js technology stack — designed for teams who need power, flexibility and performance.</p>\n<p>Hitting the right balance of needs has led Ghost to be used in production by organisations including Apple, Sky News, DuckDuckGo, Mozilla, OpenAI, Square, CloudFlare, Tinder, the Bitcoin Foundation and <a href=\"https://ghost.org/customers/\">many more</a>.</p>\n<p>Every day Ghost powers some of the most-read stories on the internet, serving hundreds of millions of requests across tens of thousands of sites. </p>\n<h2>How is Ghost different?</h2>\n<p>The first question most people have is, of course, how is Ghost different from everything else out there? Here's a table to give you a quick summary:</p>\n<style>\n.features-comparison th:not(:first-child),\n.features-comparison td:not(:first-child) {\n    text-align: center;\n}\n.features-comparison td:nth-child(1) {\n    font-weight: 500;\n}\n.features-comparison td:nth-child(2) {\n    background: #f7fcf3;\n}\n</style>\n<table class=\"features-comparison\">\n    <thead>\n        <tr>\n            <th></th>\n            <th>Ghost<br><small style=\"text-transform:initial;color:#777;font-weight:400;\">(That's us!)</small></th>\n            <th>Open platforms<br><small style=\"text-transform:initial;color:#777;font-weight:400;\">(eg. WordPress)</small></th>\n            <th>Closed platforms<br><small style=\"text-transform:initial;color:#777;font-weight:400;\">(eg. Medium)</small></th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td>🏎 Exceptionally fast</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>✅</td>\n        </tr>\n        <tr>\n            <td>🔒 Reliably secure</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>✅</td>\n        </tr>\n        <tr>\n            <td>🎨 Great design</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>✅</td>\n        </tr>\n        <tr>\n            <td>👩🏼‍🚀 Modern technology</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>✅</td>\n        </tr>\n        <tr>\n            <td>♻️ Open Source</td>\n            <td>✅</td>\n            <td>✅</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>🏰 Own your brand+data</td>\n            <td>✅</td>\n            <td>✅</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>🌍 Use a custom domain</td>\n            <td>✅</td>\n            <td>✅</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>🖼 Control your site design</td>\n            <td>✅</td>\n            <td>✅</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>🌱 Censorship-free</td>\n            <td>✅</td>\n            <td>✅</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>⭐️ Built-in SEO control</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>🚀 Native REST API</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>🛠 Comprehensive SDK</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>🤝 Works with any front-end<br>or static site framework</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>❌</td>\n        </tr>\n        <tr>\n            <td>❤️ Non-profit organisation with<br>a sustainable business model</td>\n            <td>✅</td>\n            <td>❌</td>\n            <td>❌</td>\n        </tr>\n    </tbody>\n</table>\n<p><strong>In short:</strong> Other open platforms are generally old, slow and bloated, while other closed platforms give you absolutely no control or ownership of your content. Ghost provides the best of both worlds, and more.</p>\n<p>Still after a more detailed comparison? We've got some in-depth articles comparing Ghost to <a href=\"https://ghost.org/vs/wordpress/\">WordPress</a>, <a href=\"https://ghost.org/vs/medium/\">Medium</a> and <a href=\"https://ghost.org/vs/tumblr/\">Tumblr</a>.</p>\n<h2>Background</h2>\n<p>Ghost was created by <a href=\"https://twitter.com/johnonolan\">John O'Nolan</a> and <a href=\"https://twitter.com/erisds\">Hannah Wolfe</a> in 2013 following a runaway Kickstarter campaign to create a new, modern publishing platform to serve professional publishers.</p>\n<p>Previously, John was a core contributor of WordPress and watched as the platform grew more complicated and less focused over time. Ghost started out as a little idea to be the antidote to that pain, and quickly grew in popularity as the demand for a modern open source solution became evident.</p>\n<p>Today, Ghost is one of the most popular open source projects in the world - the <strong>#1</strong> CMS <a href=\"https://github.com/tryghost/ghost\">on GitHub</a> - and is used in production by millions of people. </p>\n<p>More than anything, we approach building Ghost to create the product we've always wanted to use, the company we've always wanted to do business with, and the environment we've always wanted to work in. </p>\n<p>So, we do things a little differently to most others:</p>\n<h4>Independent structure</h4>\n<p>Ghost is structured as a <a href=\"https://ghost.org/about\">non-profit organisation</a> to ensure it can legally never be sold and will always remain independent, building products based on the needs of its users - <em>not</em> the whims of investors looking for 💰 returns.</p>\n<h4>Sustainable business</h4>\n<p>While the software we release is free, we also sell <a href=\"https://ghost.org/pricing/\">premium managed hosting</a> for it, which gives the non-profit organisation a sustainable business model and allows it to be 100% self-funded.</p>\n<h4>Distributed team</h4>\n<p>Having a sustainable business allows us to hire open source contributors to work on Ghost full-time, and we do this <a href=\"https://ghost.org/about/#careers\">entirely remotely</a>. The core Ghost team is fully distributed and live wherever they choose.</p>\n<h4>Transparent by default</h4>\n<p>We share <a href=\"https://ghost.org/about\">our revenue</a> transparently and <a href=\"https://github.com/tryghost\">our code</a> openly so anyone can verify what we do and how we do it. No cloaks or daggers. </p>\n<h4>Unconditional open source</h4>\n<p>All our projects are released under the permissive open source <a href=\"https://en.wikipedia.org/wiki/MIT_License\">MIT licence</a>, so that even if the company were to fail, our code could still be picked up and carried on by anyone in the world without restriction.</p>","frontmatter":{"date":"2018-10-16","path":"/post-two","title":"Post Number Two","tags":["JavaScript","Html5"],"type":"resource","typeID":"3","typeTitle":"资源","categores":"Web","special":""}},"next":{"id":"6eaf8d9b-2f0b-58e3-bc3c-f6bd9f537d1c","excerpt":"For self-hosted Ghost users, a custom configuration file can be used to override Ghost's default behaviour. This provides you with a range of options to configure your publication to suit your needs…","html":"<p>For self-hosted Ghost users, a custom configuration file can be used to override Ghost's default behaviour. This provides you with a range of options to configure your publication to suit your needs.</p>\n<h2>Overview</h2>\n<p>When you install Ghost using the supported and recommended method using <code class=\"language-text\">ghost-cli</code>, a custom configuration file is created for you by default. There are some configuration options which are required by default, and many optional configurations.</p>\n<p>The three required options are <code class=\"language-text\">url</code> and <code class=\"language-text\">database</code> which are configured during setup, and <code class=\"language-text\">mail</code> which needs to be configured once you've installed Ghost.</p>\n<p>This article explains how to setup your mail config, as well as walk you through all of the available config options.</p>\n<h2>Custom configuration files</h2>\n<p>The configuration is managed by <a href=\"https://github.com/indexzero/nconf/\">nconf</a>. A custom configuration file must be a valid JSON file located in the root folder and changes to the file can be implemented using <code class=\"language-text\">ghost restart</code>.</p>\n<p>Since Node.js has the concept of environments built in, Ghost supports two environments: <strong>development</strong> and <strong>production</strong>. All public Ghost publications run in production mode, while development mode can be used to test or build on top of Ghost locally.</p>\n<blockquote>\n<p>Check out the official install guides for <a href=\"/install/local/\">development</a> and <a href=\"/install/ubuntu/\">production</a>.</p>\n</blockquote>\n<p>The configuration files reflect the environment you are using:</p>\n<ul>\n<li><code class=\"language-text\">config.development.json</code></li>\n<li><code class=\"language-text\">config.production.json</code></li>\n</ul>\n<h4>Ghost in development</h4>\n<p>If you would like to start Ghost in development, you don't have to specify any environment, because development is default. To test Ghost in production, you can use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">NODE_ENV<span class=\"token operator\">=</span>production node index.js</code></pre></div>\n<h4>Debugging the configuration output</h4>\n<p>Start Ghost with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">DEBUG<span class=\"token operator\">=</span>ghost:*,ghost-config node index.js</code></pre></div>\n<h4>Running Ghost with config env variables</h4>\n<p>Start Ghost using environment variables which match the name and case of each config option:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">url<span class=\"token operator\">=</span>http://ghost.local:2368 node index.js</code></pre></div>\n<p>For nested config options, separate with two underscores:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">database__connection__host<span class=\"token operator\">=</span>mysql node index.js</code></pre></div>\n<h2>Configuration options</h2>\n<p>There are a number of configuration options which are explained in detail in this article. Below is an index of all configuration options:</p>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Required?</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">url</code></td>\n<td>In production</td>\n<td>Set the public URL for your blog</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">database</code></td>\n<td>In production</td>\n<td>Type of databased used (default: sqlite3)</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">mail</code></td>\n<td>In production</td>\n<td>Add a mail service</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">admin</code></td>\n<td>Optional</td>\n<td>Set the protocol and hostname for your admin panel</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">server</code></td>\n<td>Optional</td>\n<td>Host and port, or socket for Ghost to listen on</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">privacy</code></td>\n<td>Optional</td>\n<td>Disable features set in <a href=\"https://github.com/TryGhost/Ghost/blob/master/PRIVACY.md/\">privacy.md</a></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">paths</code></td>\n<td>Optional</td>\n<td>Customise internal paths</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">referrerPolicy</code></td>\n<td>Optional</td>\n<td>Control the content attribute of the meta referrer tag</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">useMinFiles</code></td>\n<td>Optionl</td>\n<td>Generate assets url with .min notation</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">storage</code></td>\n<td>Optional</td>\n<td>Set a custom storage adapter</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">scheduling</code></td>\n<td>Optional</td>\n<td>Set a custom scheduling adapter</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">logging</code></td>\n<td>Optional</td>\n<td>Configure logging for Ghost</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">spam</code></td>\n<td>Optional</td>\n<td>Configure spam settings</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">caching</code></td>\n<td>Optional</td>\n<td>Configure caching settings</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">compress</code></td>\n<td>Optional</td>\n<td>Disable compression of server responses</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">imageOptimization</code></td>\n<td>Optional</td>\n<td>Configure image manipulation and processing</td>\n</tr>\n</tbody>\n</table>\n<h3>URL</h3>\n<p><em>(Required in production)</em></p>\n<p>Once a Ghost publication is installed, the first thing to do is set a url. When installing using <code class=\"language-text\">ghost-cli</code> the install process request the URL during the setup process.</p>\n<p>Enter the URL that is used to access your publication. If using a subpath, enter the full path, <code class=\"language-text\">https://example.com/blog/</code>. If using SSL, always enter the URL with <code class=\"language-text\">https://</code>.</p>\n<h4>SSL</h4>\n<p>We always recommend using SSL to run your Ghost publication in production. Ghost has a number of configuration options for working with SSL, and securing the URLs for the admin <code class=\"language-text\">/ghost/</code> and the frontend of your publication. Without SSL your username and password are sent in plaintext.</p>\n<p><code class=\"language-text\">ghost-cli</code> prompts to setup SSL during the installation process. After a successful ssl setup, you can find your ssl certificate in <code class=\"language-text\">/etc/letsencrypt</code>.</p>\n<p>If you see errors such as <code class=\"language-text\">access denied from url</code>, then the provided URL in your config file is incorrect and needs to be updated.</p>\n<h3>Database</h3>\n<p><em>(Required in production)</em></p>\n<p>Ghost is configured using MySQL by default:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"connection\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"host\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"port\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_user\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_password\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_name\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Alternatively you can configure sqlite3:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sqlite3\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"connection\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"filename\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"content/data/ghost-test.db\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"useNullAsDefault\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"debug\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Number of connections</h4>\n<p>It's possible to limit the number of simultaneous connections using the pool setting. The default values are a minimum of 2 and a maximum of 10, which means Ghost always maintains two active database connections. You can set the minimum to 0 to prevent this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"client\"</span><span class=\"token operator\">:</span> ...<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"connection\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> ... <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"pool\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"min\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"max\"</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>SSL</h4>\n<p>In a typical Ghost installation the MySQL database will be on the same server as Ghost itself. With cloud computing and database-as-a-service providers you might want to enable SSL connections to the database.</p>\n<p>If your Certificate CA or the CA of your database provider is in the Mozilla trusted CA list you can enable SSL by adding <code class=\"language-text\">&quot;ssl&quot;: true</code> to the database connection configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"connection\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"host\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_cloud_database\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"port\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_user\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_password\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_name\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ssl\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This has been confirmed to work with Azure Database for MySQL. To find out if your provider is supported see the <a href=\"https://wiki.mozilla.org/CA/Included_Certificates\">Mozilla Included CA Certificate List</a>.</p>\n<p>For Amazon RDS you'll need to configure the connection with <code class=\"language-text\">&quot;ssl&quot;: &quot;Amazon RDS&quot;</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"connection\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"host\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_cloud_database\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"port\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_user\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_password\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_name\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ssl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Amazon RDS\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Custom or self-signed certificates are a little more advanced. You'll need to output your CA certificate (not your CA private key) as a single line string including literal new line characters <code class=\"language-text\">\\n</code> (you can get the single line string with <code class=\"language-text\">awk &#39;{printf &quot;%s\\\\n&quot;, $0}&#39; CustomRootCA.crt</code>) and add it to the configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"connection\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"host\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_cloud_database\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"port\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_user\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_password\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_name\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ssl\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"ca\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"-----BEGIN CERTIFICATE-----\\nMIIFY... truncated ...pq8fa/a\\n-----END CERTIFICATE-----\\n\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For a certificate chain, include all CA certificates in the single line string:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"connection\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"host\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_cloud_database\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"port\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_user\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_password\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"database\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your_database_name\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ssl\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"ca\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"-----BEGIN CERTIFICATE-----\\nMIIFY... truncated ...pq8fa/a\\n-----END CERTIFICATE-----\\n-----BEGIN CERTIFICATE-----\\nMIIFY... truncated ...wn8v90/a\\n-----END CERTIFICATE-----\\n\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Mail</h3>\n<p><em>(Required in production)</em></p>\n<p>The most important piece of configuration once you've been through the install process is to setup mail. Mail configuration allows Ghost to send emails such as lost password and user invite emails.</p>\n<p>Ghost uses <a href=\"https://github.com/nodemailer/nodemailer/tree/0.7/\">Nodemailer 0.7</a> under the hood, and tries to use the direct mail service if available - but a more reliable solution is to setup mail using an external service.</p>\n<h4>Setup an email sending account</h4>\n<p>Choose an external email service and sign up and verify your account. We highly recommend using <a href=\"https://www.mailgun.com/\">Mailgun</a> which allows up to 10,000 emails per month for free.</p>\n<h4>Configure mail with Mailgun</h4>\n<p>Mailgun allows you to use your own domain for sending transactional emails. Otherwise you can use a subdomain that Mailgun provide you with (also known as the sandbox domain, limited to 300 emails per day). You can change this at any time.</p>\n<p><strong>Make a note of your domain information</strong></p>\n<p>Once your domain is setup, find your new email service SMTP username and password that has been created for you (this is not the ones you used to sign up for Mailgun with). You can find this under \"Domain Information\" and make a note of the following details:</p>\n<ul>\n<li>Default SMTP login</li>\n<li>Default password</li>\n</ul>\n<h4>Update your <code class=\"language-text\">config.production.json</code> file</h4>\n<p>Open your production config file in any code editor and paste the username and password you just copied into the defined fields, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"mail\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"transport\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SMTP\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"options\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"service\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Mailgun\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"auth\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"postmaster@example.mailgun.org\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"pass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1234567890\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once you are finished, hit save and then run <code class=\"language-text\">restart ghost</code> for your changes to take effect. It is possible to reuse your settings for a development environment if you have both, by making the same changes to <code class=\"language-text\">config.development.json</code>.</p>\n<h4>Amazon SES</h4>\n<p>It's also possible to use <a href=\"https://aws.amazon.com/ses/\">Amazon Simple Email Service</a>. Use the SMTP username and password given when signing up and configure your <code class=\"language-text\">config.[env].json</code> file as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"mail\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"transport\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SMTP\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"options\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"host\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"YOUR-SES-SERVER-NAME\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"port\"</span><span class=\"token operator\">:</span> <span class=\"token number\">465</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"service\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SES\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"auth\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"YOUR-SES-ACCESS-KEY-ID\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"pass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"YOUR-SES-SECRET-ACCESS-KEY\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>From address</h4>\n<p>By default the 'from' address for mail sent from Ghost is set to the title of your publication, for example <code class=\"language-text\">&lt;ghost@your-publication.com&gt;</code>. To override this to something different, use:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"mail\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"from\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"myemail@address.com\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>A custom name can also be provided:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"mail\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"from\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"'Custom Name' &lt;myemail@address.com>\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Admin URL</h3>\n<p>Admin can be used to specify a different protocol for your admin panel or a different hostname (domain name). It can't affect the path at which the admin panel is served (this is always /ghost/).</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"admin\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://example.com\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Server</h3>\n<p>The server host and port are the IP address and port number that Ghost listens on for requests. By default, requests are routed from port 80 to Ghost by nginx (recommended), or apache.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"server\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"host\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"port\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2368</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Unix Sockets</h4>\n<p>Ghost can also be configured to listen on a unix socket by changing the server config:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"server\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"socket\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"path/to/socket.sock\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The default permissions are 0660, but this can be configured by expanding the socket config:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"server\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"socket\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"path/to/socket.sock\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0666\"</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Privacy</h3>\n<p>All features inside the privacy.md file are enabled by default. It is possible to turn these off in order to protect privacy:</p>\n<ul>\n<li>Update check</li>\n<li>Gravatar</li>\n<li>RPC ping</li>\n<li>Structured data</li>\n</ul>\n<p>For more information about the features, read the <a href=\"https://github.com/TryGhost/Ghost/blob/master/PRIVACY.md/\">privacy.md page</a>.</p>\n<p>To turn off <strong>all</strong> of the features, use:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"privacy\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"useTinfoil\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Alternatively, configure each feature individually:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"privacy\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"useUpdateCheck\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"useGravatar\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"useRpcPing\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"useStructuredData\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Paths</h3>\n<p>The configuration of paths can be relative or absolute. To use a content directory that does not live inside the Ghost folder, specify a paths object with a new contentPath:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"paths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"contentPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"content/\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>When using a custom content path, the content directory must exist and contain sub directories for data, images, themes, logs and adapters.</p>\n<blockquote>\n<p>If using an Sqlite database, you'll also need to update the path to your database to match the new location of the data folder.</p>\n</blockquote>\n<h3>Referrer Policy</h3>\n<p>Set the value of the content attribute of the meta referrer HTML tag by adding referrerPolicy to your config. <code class=\"language-text\">origin-when-crossorigin</code> is default. Read through all possible <a href=\"https://www.w3.org/TR/referrer-policy/#referrer-policies/\">options</a>.</p>\n<h3>Logging</h3>\n<p>Configure how Ghost should log, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"logging\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"something/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"info\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"rotation\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"count\"</span><span class=\"token operator\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"period\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1d\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"transports\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"stdout\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"file\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4><code class=\"language-text\">level</code></h4>\n<p>The default log level is <code class=\"language-text\">info</code> which prints all info, warning and error logs. Set it to <code class=\"language-text\">error</code> to only print errors.</p>\n<h4><code class=\"language-text\">rotation</code></h4>\n<p>Tell Ghost to rotate your log files. By default Ghost keeps 10 log files and rotates every day. Rotation is enabled by default in production and disabled in development.</p>\n<h4><code class=\"language-text\">transports</code></h4>\n<p>Define where Ghost should log to. By default Ghost writes to stdout and into file for production, and to stdout only for development.</p>\n<h4><code class=\"language-text\">path</code></h4>\n<p>Log your content path, e.g. <code class=\"language-text\">content/logs/</code>. Set any path but ensure the permissions are correct to write into this folder.</p>\n<h3>Spam</h3>\n<p>Tell Ghost how to treat <a href=\"https://github.com/TryGhost/Ghost/blob/master/core/server/config/defaults.json#L31\">spam requests</a>.</p>\n<h3>Caching</h3>\n<p>Configure <a href=\"https://github.com/TryGhost/Ghost/blob/master/core/server/config/defaults.json#L57/\">caching</a> for sitemaps, redirects or assets.</p>\n<h3>Compress</h3>\n<p>The compression flag is turned on by default using <code class=\"language-text\">&quot;compress&quot;: true</code>. Alternatively you can turn it off with <code class=\"language-text\">&quot;compress&quot;: false</code>.</p>\n<h3>Image optimisation</h3>\n<p>When uploading images into the Ghost editor, they are automatically processed and compressed by default. This can be disabled in your <code class=\"language-text\">config.[env].json</code> file using:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"imageOptimization\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"resize\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Image compression details:</p>\n<ul>\n<li>Resize the image to 2000px max width</li>\n<li>JPEG's are compressed to 80% quality.</li>\n<li>Meta data removed</li>\n</ul>\n<p>The original image is kept with the suffix <code class=\"language-text\">_0</code>.</p>\n<h2>Summary</h2>\n<p>You've explored how to configure a self-hosted Ghost publication with the required config options, as well as discovered how to make use of the optional config options that are available in the <code class=\"language-text\">config.[env].json</code> file.</p>\n<p>If you run into any issues when configuring your publication, try searching this site to find information about common error messages and issues.</p>","frontmatter":{"date":"2018-10-18","path":"/post-four","title":"Post Number Four","tags":["Html5"],"type":"dev","typeID":"2","typeTitle":"技术杂谈","categores":"游戏","special":"JavaWeb开发系列"}}}}