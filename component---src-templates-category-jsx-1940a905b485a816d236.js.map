{"version":3,"sources":["webpack:///./src/templates/category.jsx"],"names":["ContentWrapper","Object","_emotion_styled_base__WEBPACK_IMPORTED_MODULE_5__","target","props","theme","breakpoints","l","hd","m","s","ContentContainer","ContentPost","AsideWrapper","vl","StyledLink","shadow","feature","title","bottom","small","default","transitions","boom","transition","borderRadius","hover","colors","primary","dark","Link","white","light","grey","Category","duration","border","posts","_ref","pageContext","data","spath","tagName","postsByType","postsByCategory","postsByTag","categories","keyword","allMarkdownRemark","edges","map","_ref2","node","frontmatter","type","typeTitle","push","keys","categores","tags","forEach","tag","uri","split","length","_emotion_core__WEBPACK_IMPORTED_MODULE_6__","layouts__WEBPACK_IMPORTED_MODULE_11__","react_helmet__WEBPACK_IMPORTED_MODULE_10___default","a","config","siteTitle","components__WEBPACK_IMPORTED_MODULE_13__","to","className","path","key","id","cover","childImageSharp","fluid","stype","date","excerpt","other","list","propTypes","PropTypes","shape","string","tagname","arrayOf","object","isRequired","array","typeID","query"],"mappings":"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","file":"component---src-templates-category-jsx-1940a905b485a816d236.js","sourcesContent":["import React from 'react';\nimport { graphql, Link } from 'gatsby';\nimport styled from '@emotion/styled';\nimport PropTypes from 'prop-types';\nimport Helmet from 'react-helmet';\nimport { Layout, Container } from 'layouts';\nimport config from '../../config/site';\nimport { \n  Header, \n  Archive, \n  GuessLike, \n  Card,\n  BlogList, \n  ContentNav,\n} from 'components';\n\nconst ContentWrapper = styled.div`\n  margin: 1rem 9rem 1rem 9rem;\n  width: auto;\n  @media (max-width: ${props => props.theme.breakpoints.l}) {\n    margin: 2rem 6rem 2rem 6rem;\n  }\n  @media (max-width: ${props => props.theme.breakpoints.hd}) {\n    margin: 1rem 4rem 1rem 4rem;\n  }\n  @media (max-width: ${props => props.theme.breakpoints.m}) {\n    margin: 1rem 2rem 1rem 2rem;\n  }\n  @media (max-width:  ${props => props.theme.breakpoints.s}) {\n    margin:  1rem;\n  }\n`;\n\nconst ContentContainer = styled.div`\n  width: auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  @media (max-width: ${props => props.theme.breakpoints.m}) {\n    flex-wrap: wrap;\n  }\n`; \n\nconst ContentPost = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  padding-right: 1rem;\n  @media (max-width: ${props => props.theme.breakpoints.m}) {\n    padding-right: 0rem;\n  }\n  .list{\n    margin:0;\n    padding:0;\n    @media (max-width: ${props => props.theme.breakpoints.m}) {\n      margin: 0 0 1rem 0;\n    }\n  }\n`;\n\nconst AsideWrapper = styled.div`\n  width: calc(99.9% * 1 / 3 - 1rem);\n  display: flex;\n  flex-direction: column;\n  @media (max-width: ${props => props.theme.breakpoints.vl}) {\n    width: calc(99.9% * 1 / 2 - 1rem);\n  }\n  @media (max-width: ${props => props.theme.breakpoints.m}) {\n    width: 100%;\n  }\n`;\n\n\nconst Wrapper = styled.article`\n  width:100%;\n  margin: 0;\n  padding: 1rem 3rem;\n  font-size: 14px;\n  box-shadow: ${props => props.theme.shadow.feature.title.bottom};\n`;\n\nconst Image = styled.div`\n  margin: auto;\n  position: relative;\n  box-shadow: ${props => props.theme.shadow.feature.small.default};\n  transition: ${props => props.theme.transitions.boom.transition};\n  border-radius: ${props => props.theme.borderRadius.default};\n  min-height: 400px;\n  img {\n    border-radius: ${props => props.theme.borderRadius.default};\n  }\n  &:hover {\n    box-shadow: ${props => props.theme.shadow.feature.small.hover};\n    transform: scale(1.04);\n  }\n  a {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border-radius: ${props => props.theme.borderRadius.default};\n    > div {\n      position: static !important;\n    }\n    > div > div {\n      position: static !important;\n    }\n    &:focus {\n      outline: none;\n      box-shadow: 0 0 0 5px ${props => props.theme.colors.primary.dark};\n    }\n  }\n  flex-basis: 100%;\n  max-width: 100%;\n  width: 100%;\n  @media (max-width: 800px) {\n    flex-basis: 100%;\n    max-width: 100%;\n    width: 100%;\n    margin-bottom: 1.5rem;\n  }\n  @media (max-width: 500px) {\n    min-height: 200px;\n  }\n  div{\n    style:none;\n  }\n`;\n\nconst StyledLink = styled(Link)`\n    color: ${props => props.theme.colors.white.light};\n    padding: 5px 10px;\n    border: solid 1px #fff;\n    border-radius: 20px;\n    &:hover {\n      color: ${props => props.theme.colors.white.grey};\n      background: ${props => props.theme.colors.white.light};\n    }\n`;\n\nconst Information = styled.div`\n    h1 {\n      display: inline-block;\n      transition: all ${props => props.theme.transitions.default.duration};\n      &:hover {\n        color: ${props => props.theme.colors.white.light};\n      }\n    }\n    text-align: center;\n    flex-basis: 100%;\n    max-width: 100%;\n    width: 100%;\n    border-bottom: ${props => props.theme.border.posts};\n    @media (max-width: 800px) {\n      flex-basis: 100%;\n      max-width: 100%;\n      width: 100%;\n    }\n`;\n\nconst HeadTitle = styled.div`\n    padding: 1rem 0rem;\n    display: flex;\n    flex-direction: column;\n    color: ${props => props.theme.colors.white.light};\n`;\n\nconst Category = ({ pageContext, data }) => {\n  const { spath, tagName } = pageContext;\n  const postsByType = {};\n  const postsByCategory = {};\n  const postsByTag = {};\n  var title = [];\n  var categories = [];\n  var posts = [];\n  var keyword = [];\n  data.allMarkdownRemark.edges.map(({ node }) => {  \n    if (node.frontmatter.type) {\n      if (!postsByType[node.frontmatter.type]) {\n        postsByType[node.frontmatter.type] = [];\n      }\n      if (!postsByType[node.frontmatter.type][node.frontmatter.typeTitle]) {\n        postsByType[node.frontmatter.type][node.frontmatter.typeTitle] = [];\n      }\n      postsByType[node.frontmatter.type][node.frontmatter.typeTitle].push(node);\n    }\n  });\n  const typeList = Object.keys(postsByType);\n  typeList.map(type => {\n    postsByType[type][Object.keys(postsByType[type])].map(node => {\n      if(type){\n        if (!postsByCategory[type]) {\n          postsByCategory[type] = [];\n        }\n        if (node.frontmatter.categores) {\n          if (!postsByCategory[type][node.frontmatter.categores]) {\n            postsByCategory[type][node.frontmatter.categores] = [];\n          }\n          postsByCategory[type][node.frontmatter.categores].push(node);\n        }\n        if (!postsByTag[type]) {\n          postsByTag[type] = [];\n        }\n        if (node.frontmatter.tags) {\n          node.frontmatter.tags.forEach(tag => {\n            if (!postsByTag[type][tag]) {\n              postsByTag[type][tag] = [];\n            }\n            postsByTag[type][tag].push(node);\n          });\n        }\n      }\n    })\n  });\n  var uri = spath.split(\"/\");\n  switch (uri.length) {\n    case 2:\n      if(postsByType[uri[0]]){\n        keyword.push(Object.keys(postsByType[uri[0]]));\n        keyword.push(tagName);\n        title = [(uri[0]), Object.keys(postsByType[uri[0]])+\" · 标签\"];\n        posts = postsByCategory[uri[0]][uri[1]]?postsByCategory[uri[0]][uri[1]]:postsByTag[uri[0]][uri[1]];\n        categories = Object.keys(postsByTag[uri[0]]);\n      }\n      break;\n    case 3:\n      //title = [uri[0], Object.keys(postsByType[uri[0]])];\n      //categories = Object.keys(postsByCategory[uri[0]][uri[1]][uri[2]]);\n      break;\n    default:\n      if(postsByType[uri[0]]){\n        keyword.push(Object.keys(postsByType[uri[0]]));\n        title = [uri[0], Object.keys(postsByType[uri[0]])+\" · 分类\"];\n        posts = postsByType[uri[0]][Object.keys(postsByType[uri[0]])];\n        categories = Object.keys(postsByCategory[uri[0]]);\n      }\n      break;\n  }\n  //const upperTag = tagName.charAt(0).toUpperCase() + tagName.slice(1);\n  return (\n    <Layout>\n      <Helmet title={`${tagName} | ${config.siteTitle}`} />\n      <Header title={tagName}>\n        <StyledLink to=\"/category\">分类</StyledLink>\n      </Header>\n      <ContentWrapper>\n        <ContentContainer>\n          <ContentPost>\n            <Container className=\"list\">\n              <ContentNav path={spath} title=\"分类\" keyword={keyword}></ContentNav>\n              {posts && posts.map(node => (\n                <BlogList\n                  key={node.id}\n                  cover={node.frontmatter.cover.childImageSharp.fluid}\n                  stype={node.frontmatter.type}\n                  path={node.frontmatter.path}\n                  title={node.frontmatter.title}\n                  date={node.frontmatter.date}\n                  tags={node.frontmatter.tags}\n                  excerpt={node.excerpt}\n                />\n              ))}\n            </Container>\n          </ContentPost>\n          <AsideWrapper>\n            <Card \n              title={title[1]} \n              other=\"\" \n              path={title[0]}\n              list={categories}/>\n            <Archive />\n            <GuessLike />\n          </AsideWrapper>\n        </ContentContainer>      \n      </ContentWrapper>\n    </Layout>\n  )};\n\nexport default Category;\n\nCategory.propTypes = {\n  pageContext: PropTypes.shape({\n    spath: PropTypes.string,\n    tagname: PropTypes.string,\n  }),\n  data: PropTypes.shape({\n    allMarkdownRemark: PropTypes.shape({\n      edges: PropTypes.arrayOf(\n        PropTypes.shape({\n          node: PropTypes.shape({\n            excerpt: PropTypes.string,\n            frontmatter: PropTypes.shape({\n              cover: PropTypes.object.isRequired,\n              path: PropTypes.string.isRequired,\n              title: PropTypes.string.isRequired,\n              date: PropTypes.string.isRequired,\n              tags: PropTypes.array,\n              categores: PropTypes.string.isRequired,\n              type: PropTypes.string.isRequired,\n              typeID: PropTypes.string.isRequired,\n              typeTitle: PropTypes.string.isRequired,\n            }),\n          }),\n        }).isRequired\n      ),\n    }),\n  }),\n};\n\nexport const query = graphql`\n  query {\n    allMarkdownRemark(sort: { order: DESC, fields: [frontmatter___date] }) {\n      edges {\n        node {\n          id\n          excerpt(pruneLength: 200)\n          frontmatter {\n            title\n            path\n            tags\n            type\n            typeID\n            typeTitle\n            categores\n            date(formatString: \"MM.DD.YYYY\")\n            cover {\n              childImageSharp {\n                fluid(\n                  maxWidth: 1000\n                  quality: 90\n                  traceSVG: { color: \"#2B2B2F\" }\n                ) {\n                  ...GatsbyImageSharpFluid_withWebp_tracedSVG\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n"],"sourceRoot":""}